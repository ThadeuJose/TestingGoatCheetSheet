<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <title>Testing Goat Cheet Sheet</title>
    </head>
    <body>
        <div class="main">
            <h1>Testing Goat Cheet Sheet</h1>
            <div>
                <h2>Initial Project Setup</h2>
                <ul>
                    <li>Start with a User Story and map it to a first functional test.</li>
                    <li>Pick a test framework - unittest is fine, and options like py.test, nose, or Green can also offer some advantages.</li>
                    <li>Run the functional test and see your first expected failure.</li>
                    <li>Pick a web framework such as Django, and find out how to run unit tests against it.</li>
                    <li>Create your first unit test to address the current FT failure, and see it fail.</li>
                    <li>Do your first commit to a VCS like Git.</li>
                </ul>
                Relevant chapters: <a href="https://www.obeythetestinggoat.com/book/chapter_01.html">Chapter 1</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_02_unittest.html">Chapter 2</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_unit_test_first_view.html">Chapter 3</a>    
            </div>
            <div>
                <h2>The Basic TDD Workflow</h2>
                <div class="wrapper">
                    <div>                        
                        <img class="imgtdd" src="Double Loop TDD Cycle.png" alt="Double Loop TDD Cycle">      
                        <img class="hide" src="Double Loop TDD Cycle.png" alt="Double Loop TDD Cycle Original Size">                  
                    </div>
                    <div>                        
                        <ul class="mt-0">
                            <li>Double-loop TDD</li>
                            <li>Red, Green, Refactor</li>
                            <li>Triangulation</li>
                            <li>The scratchpad</li>
                            <li>"3 Strikes and Refactor"</li>
                            <li>"Working State to Working State"</li>
                            <li>"YAGNI"</li>
                        </ul>
                    </div>                    
                </div>
                <br>
                Relevant chapters: <a href="https://www.obeythetestinggoat.com/book/chapter_philosophy_and_refactoring.html">Chapter 4</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_post_and_database.html">Chapter 5</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_working_incrementally.html">Chapter 7</a>
            </div>
            <div>
                <h2>Moving Beyond Dev-Only Testing</h2>
                <ul>
                    <li>Start system testing early. Ensure your components work together: web server,static content, database.</li>
                    <li>Build a staging environment to match your production environment, and run your FT suite against it.</li>
                    <li><p class="mt-0 mb-5">Automate your staging and production environments:</p> 
                        <ul>
                            <li>PaaS vs. VPS</li>
                            <li>Fabric</li>
                            <li>Configuration management (Chef, Puppet, Salt, Ansible)</li>
                            <li>Vagrant</li>
                        </ul>
                    </li>
                    <li>Think through deployment pain points: the database, static files, dependencies, how to customise settings, and so on.</li>
                    <li>Build a CI server as soon as possible, so that you don’t have to rely on self-discipline to see the tests run.</li>
                </ul>
                Relevant chapters: <a href="https://www.obeythetestinggoat.com/book/chapter_manual_deployment.html">Chapter 9</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_automate_deployment_with_fabric.html">Chapter 11</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_CI.html">Chapter 24</a>, <a href="https://www.obeythetestinggoat.com/book/appendix_III_provisioning_with_ansible.html">Appendix C</a>
            </div>
            <div>
                <h2>General Testing Best Practices</h2>
                <ul>
                    <li>Each test should test one thing.</li>
                    <li>One test file per application code source file.</li>
                    <li>Consider at least a placeholder test for every function and class, no matter how simple.</li>
                    <li>"Don't test constants"</li>
                    <li>Try to test behaviour rather than implementation.</li>
                    <li>Try to think beyond the charmed path through the code, and think through edge cases and error cases.</li>
                </ul>
                Relevant chapters: <a href="https://www.obeythetestinggoat.com/book/chapter_philosophy_and_refactoring.html">Chapter 4</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_database_layer_validation.html">Chapter 13</a>, <a href=https://www.obeythetestinggoat.com/book/chapter_simple_form.html"">Chapter 14</a>
            </div>
            <div>
                <h2>Selenium/Functional Testing Best Practices</h2>
                <ul>
                    <li>Use explicit rather than implicit waits, and the interaction/wait pattern.</li>
                    <li>Avoid duplication of test code - helper methods in a base class and the Page pattern are possible solutions.</li>
                    <li>Avoid double-testing functionality. If you have a test that covers a time-consuming process (e.g., login), consider ways of skipping it in other tests (but be aware of unexpected interactions between seemingly unrelated bits of functionality).</li>
                    <li>Look into BDD tools as another way of structuring your FTs.</li>
                </ul>
                Relevant chapters: <a href="https://www.obeythetestinggoat.com/book/chapter_server_side_debugging.html">Chapter 21</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_CI.html">Chapter 24</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_page_pattern.html">Chapter 25</a>
            </div>
            <div>
                <h2>Outside-In, Test Isolation Versus Integrated Tests, and Mocking</h2>
                Remember the reasons we write tests in the first place:
                <ul>
                    <li>To ensure correctness and prevent regressions</li>
                    <li>To help us to write clean, maintainable code</li>
                    <li>To enable a fast, productive workflow</li>
                </ul>
                <div>And with those objectives in mind, think of different types of tests, and the trade-offs between them:</div>
                <br>
                <i>Functional tests</i>
                <ul>
                    <li>Provide the best guarantee that your application really works correctly, from the point of view of the user</li>
                    <li>But: it’s a slower feedback cycle</li>
                    <li>And they don’t necessarily help you write clean code</li>
                </ul>
                <i>Integrated tests (reliant on, for example, the ORM or the Django Test Client)</i>
                <ul>
                    <li>Are quick to write</li>
                    <li>Are easy to understand</li>
                    <li>Will warn you of any integration issues</li>
                    <li>But: may not always drive good design (that’s up to you!)</li>
                    <li>And are usually slower than isolated tests</li>
                </ul>
                <i>Isolated (“mocky”) tests</i>
                <ul>
                    <li>Involve the most hard work</li>
                    <li>Can be harder to read and understand</li>
                    <li>But: are the best ones for guiding you towards better design</li>
                    <li>And run the fastest</li>
                </ul>
                
                <div>If you do find yourself writing tests with lots of mocks, and they feel painful, remember “listen to your tests” — ugly, mocky tests may be trying to tell you that your code could be simplified.</div>
                <br>
                Relevant chapters: <a href="https://www.obeythetestinggoat.com/book/chapter_outside_in.html">Chapter 22</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_purist_unit_tests.html">Chapter 23</a>, <a href="https://www.obeythetestinggoat.com/book/chapter_hot_lava.html">Chapter 26</a>
                <br>
                <br>                
            </div>  
        </div>  
    </body>
</html>